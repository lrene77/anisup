<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>ANIMAL SUPPORT</title>

<!-- 모바일 웹 페이지 설정 -->
<link rel="shortcut icon" href="../assets/ico/favicon_1.ico" />
<link rel="apple-touch-icon-precomposed"
	href="../assets/ico/apple-touch-icon-144-precomposed.png" />

<!-- Javascript -->
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>

<!-- bootstrap -->
<link rel="stylesheet" type="text/css"
	href="../assets/css/bootstrap.min.css" />

<!-- 나눔고딕 웹 폰트 적용 -->
<link rel="stylesheet" type="text/css"
	href="../assets/css/nanumfont.css" />

<!-- 반응형 웹을 지원하지 않을 경우 -->
<!-- <link rel="stylesheet" href="../assets/css/non-responsive.css" /> -->

<!-- IE8 이하 버전 지원 -->
<!--[if lt IE 9]>
		<script type="text/javascript" src="../assets/js/html5shiv.js"></script>
		<script type="text/javascript" src="../assets/js/respond.min.js"></script>
		<![endif]-->

<!-- IE10 반응형 웹 버그 보완 -->
<!--[if gt IE 9]>
		<link rel="stylesheet" type="text/css" href="../assets/css/ie10.css" />
		<script type="text/javascript" src="../assets/js/ie10.js"></script>
		<![endif]-->

<!-- 공용 CSS -->
<link rel="stylesheet" type="text/css" href="../assets/css/common.css">
<!-- 개인 CSS -->
<link rel="stylesheet" type="text/css"
	href="../assets/css/ani/ani_total.css">
<link rel="stylesheet" type="text/css" href="../assets/css/ani/map.css">

<!-- 통합 JS -->
<script type="text/javascript" src="../assets/js/ani/total.js"></script>
<!-- 개인 JS -->
<script type="text/javascript" src="../assets/js/ani/map.js"></script>

<!-- 구글 맵 스크립트 참조 -->
<script
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAlc7IuFSW7wK1ZrBWCXVAYGT0GMxeZgpk"></script>
<!-- gmap 플러그인 참조 -->
<script src="../plugins/gmaps/gmaps.min.js"></script>
<script src="../plugins/gmaps/gmaps_helper.js"></script>
<!-- Ajax Helper -->
<link rel="stylesheet" href="../plugins/ajax/ajax_helper.css" />
<script src="../plugins/ajax/ajax_helper.js"></script>
<!-- handlebar plugin -->
<script src="../plugins/handlebars/handlebars-v4.0.5.js"></script>
</head>

<body>
	<div class="container">
		<!-- 상단 시작 -->
		<header>
			<p class="hidden-xs" id="logo">
				<a href="../index.html"><img src="../img/logo.png" alt="logo" /></a>
			</p>
			<!-- 메뉴바 시작-->
			<nav class="navbar navbar-default" role="navigation">
				<!-- 로고 -->
				<div class="navbar-header">
					<!-- 반응형 메뉴 구현 기능 시작 -->
					<button type="button" class="navbar-toggle" data-toggle="collapse"
						data-target="#gnb">
						<span class="sr-only">메뉴</span> <span class="icon-bar"></span> <span
							class="icon-bar"></span> <span class="icon-bar"></span>
					</button>
					<!-- 반응형 메뉴 구현 기능 끝 -->
					<a class="navbar-brand" href="../index.html" id="logotxt">ANIMAL
						SUPPORT</a>
				</div>
				<div class="collapse navbar-collapse" id="gnb">
					<ul class="nav navbar-nav">
						<!-- 드롭다운 시작 -->
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							id="top-menu" data-toggle="dropdown">후 원</a>
							<ul class="dropdown-menu">
								<li><a href="../sup/sup.html">프로젝트 후원</a></li>
								<li><a href="../sup/sup_rev.html">후원 후기</a></li>
							</ul></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							id="top-menu" data-toggle="dropdown">입 양</a>
							<ul class="dropdown-menu">
								<li><a href="ani_list.html">입양</a></li>
								<li><a href="ani_rev.html">입양 후기</a></li>
								<li><a href="map.html">보호소 지도</a></li>
							</ul></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							id="top-menu" data-toggle="dropdown">활 동</a>
							<ul class="dropdown-menu">
								<li><a href="../info/info/info.html">활동</a></li>
								<li><a href="../info/info/noti.html">공지사항</a></li>
								<li><a href="../info/info/qna.html">Q&amp;A</a></li>
							</ul></li>
						<li class="dropdown" id="top-menu"><a
							href="../login/login.html">로 그 인</a></li>
					</ul>
				</div>
				<!-- 메뉴 끝 -->
			</nav>
			<!-- 메뉴바 끝 -->
		</header>
		<!-- 상단 끝 -->
		<br class="space">
		<!-- 리스트 시작 -->
		<section>
			<h2 class="noti">보호소지도</h2>
			<small>AS의 입양 게시판입니다.</small>
			<hr>
			<div class="row">

				<div class="col-md-7">
					<div id="gmap" style="height: 400px"></div>

				</div>

				<div class="col-md-5">
					<table class="table">
						<div class="col-md-12">
							<form id="find-form">
								<div class="input-group">
									<label for="dropdown1" style="margin-bottom: 20px;">시 /
										구 &nbsp;</label> <select type="dropdown" id="dropdown1">
										<option value="">선택하세요</option>
										<option value="서울">서울</option>
										<option value="경기">경기</option>
										<option value="부산">부산</option>
									</select> <label for="dropdown2" style="margin-bottom: 20px;"></label> <select
										type="dropdown" id="dropdown2">
										<option value="">선택하세요</option>
									</select> <span class="input-group-btn">
										<button class="btn glyphicon glyphicon-search btn btn-default"
											type="submit">검색</button>
									</span>
								</div>
							</form>
						</div>
						<script id="item_tmpl" type="text/x-handlebars-template">
		<div>
			<div class="media" style="width: 180px; height: 255px;">
				<div class="thumbnail">
					<a href="{{placeUrl}}">
						<img class="media-object" src="{{imageUrl}}">
					</a>
					<div class="caption">
						<h5 class="media-heading">{{title}}</h5>
						<ul class="list-unstyled">
							<li>주소 : {{address}}</li>
							<li>거리 : {{distance}}M 거리</li>
							<li>연락처 : <a href="tel:{{phone}}">{{phone}}</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</script>

						<script type="text/javascript">
							var map_addr = "";
							var map_title = "";
							var map_icon = "../img/marker.png";
							var map_content = "";
							var lat_value = 0;
							var lng_value = 0;

							var map = createGoogleMap("#gmap", lat_value,
									lng_value);
							GMaps
									.geolocate({
										success : function(position) {
											lat_value = position.coords.latitude;
											lng_value = position.coords.longitude;
											map.setCenter(lat_value, lng_value);

											$
													.get(
															"https://maps.googleapis.com/maps/api/geocode/json",
															{
																latlng : lat_value
																		+ ","
																		+ lng_value,
																key : "AIzaSyAlc7IuFSW7wK1ZrBWCXVAYGT0GMxeZgpk"
															},
															function(json) {
																if (json.status == 'OK') {
																	map_addr = json.results[0].formatted_address;
																	map_content = "<h4>"
																			+ map_addr
																			+ "</h4>";

																	addMapMarker(
																			map,
																			lat_value,
																			lng_value,
																			map_addr,
																			map_icon,
																			map_content);
																}
															});
										},

										error : function(error) {
											alert('위치정보 조회에 실패했습니다. : '
													+ error.message);
										},

										not_supported : function() {
											alert("Geolocation 기능을 지원하지 않는 브라우저 입니다.");
										},

										always : function() {
											console.log("처리 완료됨.");
										}
									});

							$("#find-form")
									.submit(
											function(e) {
												e.preventDefault();

												var keyword = $(
														"#dropdown2 option:selected")
														.val();

												if (!keyword) {
													alert("시 / 구 를 선택해주세요.");
													return false;
												}

												$
														.get(
																"../api/proxy.do",
																{
																	csurl : "http://apis.daum.net/local/v1/search/keyword.json",
																	apikey : 'dbb53d4653a96c9dd6214aee9935973e',
																	query : keyword,
																	location : lat_value
																			+ ","
																			+ lng_value,
																	radius : 20000,
																	image : "only"
																},
																function(json) {
																	var item = json.channel.item;

																	for (var i = 0; i < item.length; i++) {
																		var template = Handlebars
																				.compile($(
																						"#item_tmpl")
																						.html());
																		var html = template(item[i]);

																		addMapMarker(
																				map,
																				item[i].latitude,
																				item[i].longitude,
																				item[i].title,
																				'../img/marker2.png',
																				html);
																	}
																});
											});
						</script>
						<thead>
							<tr style="background-color: #eee;">
								<th class="text-center">보호소 명</th>
								<th class="text-center">전화번호</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="text-center">서울 보호소</td>
								<td class="text-center">02)555-5555</td>
							</tr>
							<tr>
								<td class="text-center">경기 보호소</td>
								<td class="text-center">031)563-5843</td>
							</tr>
							<tr>
								<td class="text-center">부산 보호소</td>
								<td class="text-center">119)517-9894</td>
							</tr>
							<tr>
								<td class="text-center">고흠 보호소</td>
								<td class="text-center">031)215-1885</td>
							</tr>

						</tbody>
					</table>
				</div>
			</div>
		</section>
		<!-- 리스트 종료 -->

		<!-- 하단 영역 -->
		<footer>
			<div>
				<img src="../img/footer.png" alt="하단이미지">
			</div>
			<address>
				<br /> 단체명 : ANIMAL SUPPORT&nbsp;&#124;&nbsp; 전화번호 : 031-000-0000<br />
				주소 : 서울시 강남구 역삼동 815-4 만이빌딩 5F 그린컴퓨터아카데미<br /> Copyright 2017 <a
					href="index.html">&copy;ANIMAL&nbsp;SUPPORT </a>All rights
				reserved.
			</address>
		</footer>
	</div>
</body>
</html>